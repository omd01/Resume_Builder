<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LinksUs Resume Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="p-2">
    <div class="container flex flex-col justify-center w-full">
      <header class="flex justify-center flex-col items-center pt-4">
        <h1 class="text-[#007bff] font-bold text-3xl">Resume Builder Pro</h1>
        <p class="text-[#007bff] font-semibold text-base">Powered By LinksUs</p>
      </header>

      <nav class="justify-center flex py-4">
        <ul class="flex font-semibold text-white text-sm">
          <li
            class="mx-3 bg-[#007bff] p-3 hover:bg-[#0056b3] cursor-pointer"
            id="manual-input-tab"
            onclick="showSection('manual-input')"
          >
            Manual Input
          </li>
          <li
            class="mx-3 bg-[#007bff] p-3 hover:bg-[#0056b3] cursor-pointer"
            id="linkedin-input-tab"
            onclick="showSection('linkedin-input')"
          >
            LinkedIn Profile
          </li>
          <li
            class="mx-3 bg-[#007bff] p-3 hover:bg-[#0056b3] cursor-pointer"
            id="resume-upload-tab"
            onclick="showSection('resume-upload')"
          >
            Upload Resume
          </li>
        </ul>
      </nav>

      <main>
        <section id="manual-input" class="section">
          <form
            class="max-w-md mx-auto p-3 md:max-w-3xl"
            action="/formdata"
            method="post"
            id="resumeForm"
          >
            <h2 class="py-4 text-2xl">Resume Form</h2>

            <div class="relative z-0 w-full mb-5 group">
              <label
                for="name"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Name *</label
              >
              <input
                type="text"
                name="name"
                id="name"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
                required
              />
            </div>

            <div class="relative z-0 w-full mb-5 group">
              <label
                for="phone"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Phone</label
              >
              <input
                type="text"
                name="phone"
                id="phone"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
                required
              />
            </div>

            <div class="relative z-0 w-full mb-5 group">
              <label
                for="email"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Email</label
              >
              <input
                type="email"
                name="email"
                id="email"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
                required
              />
            </div>

            <div class="grid md:grid-cols-2 md:gap-6">
              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="location"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Location</label
                >
                <input
                  type="text"
                  name="location"
                  id="location"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                  required
                />
              </div>
              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="github"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >GitHub</label
                >
                <input
                  type="text"
                  name="github"
                  id="github"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>
            </div>

            <div class="grid md:grid-cols-2 md:gap-6">
              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="leetcode"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >LeetCode</label
                >
                <input
                  type="text"
                  name="leetcode"
                  id="leetcode"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>
              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="linkedin"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Linkdin</label
                >
                <input
                  type="text"
                  name="linkedin"
                  id="linkedin"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>
            </div>
            <div class="relative z-0 w-full mb-5 group">
              <label
                for="summary"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Summary</label
              >
              <textarea
                rows="2"
                type="text"
                name="summary"
                id="summary"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
                required
              ></textarea>
            </div>

            <!-- Skills -->

            <div class="flex items-center py-6">
              <div class="">
                <h2 class="text-lg mr-5">skills</h2>
              </div>
              <div class="h-[2px] bg-slate-300 w-full"></div>
            </div>

            <div class="relative z-0 w-full mb-5 group">
              <label
                for="softSkills"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Soft Skills ( seprate by comma ',' )</label
              >
              <input
                type="text"
                name="softSkills"
                id="softSkills"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
                required
              />
            </div>

            <div class="relative z-0 w-full mb-5 group">
              <label
                for="hardSkills"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Hard Skills</label
              >
              <input
                type="text"
                name="hardSkills"
                id="hardSkills"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
                required
              />
            </div>

            <div class="relative z-0 w-full mb-5 group">
              <label
                for="technologySkills"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Technology Skills</label
              >
              <input
                type="text"
                name="technologySkills"
                id="technologySkills"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
                required
              />
            </div>

            <!-- Education -->

            <div class="flex items-center py-6">
              <div class="">
                <h2 class="text-lg mr-5">Education</h2>
              </div>
              <div class="h-[2px] bg-slate-300 w-full"></div>
            </div>

            <div class="grid md:grid-cols-2 md:gap-6">
              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="educationDegree"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Degree</label
                >
                <input
                  type="text"
                  name="educationDegree"
                  id="educationDegree"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>

              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="educationInstitution"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Institution</label
                >
                <input
                  type="text"
                  name="educationInstitution"
                  id="educationInstitution"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>
            </div>

            <!-- Internship -->
            <div class="flex items-center py-6">
              <div class="">
                <h2 class="text-lg mr-5">Internships</h2>
              </div>
              <div class="h-[2px] bg-slate-300 w-full"></div>
            </div>
            <div class="relative z-0 w-full mb-5 group">
              <label
                for="internshipName"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Internship Name</label
              >
              <input
                type="text"
                name="internshipName"
                id="internshipName"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
              />
            </div>
            <div class="grid md:grid-cols-2 md:gap-6">
              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="internshipPosition"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Position</label
                >
                <input
                  type="text"
                  name="internshipPosition"
                  id="internshipPosition"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>

              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="internshipDuration"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Duration</label
                >
                <input
                  type="text"
                  name="internshipDuration"
                  id="internshipDuration"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>
            </div>

            <div class="relative z-0 w-full mb-5 group">
              <label
                for="internshipDescription"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Description</label
              >
              <textarea
                type="text"
                rows="3"
                name="internshipDescription"
                id="internshipDescription"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
              ></textarea>
            </div>

            <!-- Experience -->
            <div class="flex items-center py-6">
              <div class="">
                <h2 class="text-lg mr-5">Experience</h2>
              </div>
              <div class="h-[2px] bg-slate-300 w-full"></div>
            </div>
            <div class="grid md:grid-cols-2 md:gap-6">
              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="experiencePosition"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Position</label
                >
                <input
                  type="text"
                  name="experiencePosition"
                  id="experiencePosition"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>

              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="experienceCompany"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Company</label
                >
                <input
                  type="text"
                  name="experienceCompany"
                  id="experienceCompany"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>

              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="experienceDuration"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Duration</label
                >
                <input
                  type="text"
                  name="experienceDuration"
                  id="experienceDuration"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>

              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="experienceBadgeLink"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Badge Link</label
                >
                <input
                  type="text"
                  name="experienceBadgeLink"
                  id="experienceBadgeLink"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>
            </div>

            <div class="relative z-0 w-full mb-5 group">
              <label
                for="experienceDescription"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Description</label
              >
              <textarea
                type="text"
                rows="3"
                name="experienceDescription"
                id="experienceDescription"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
              ></textarea>
            </div>

            <div class="flex items-center py-6">
              <div class="">
                <h2 class="text-lg mr-5">Projects</h2>
              </div>
              <div class="h-[2px] bg-slate-300 w-full"></div>
            </div>

            <div class="grid md:grid-cols-2 md:gap-6">
              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="projectName"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Project Name</label
                >
                <input
                  type="text"
                  name="projectName"
                  id="projectName"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>

              <div class="relative z-0 w-full mb-5 group">
                <label
                  for="projectTechnology"
                  class="block mb-2 text-sm font-medium text-gray-900"
                  >Technology</label
                >
                <input
                  type="text"
                  name="projectTechnology"
                  id="projectTechnology"
                  class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                  placeholder=" "
                />
              </div>
            </div>

            <div class="relative z-0 w-full mb-5 group">
              <label
                for="projectDescription"
                class="block mb-2 text-sm font-medium text-gray-900"
                >Description</label
              >
              <textarea
                type="text"
                rows="3"
                name="projectDescription"
                id="projectDescription"
                class="shadow-sm bg-gray-50 border border-gray-300 outline-blue-700 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder=" "
              ></textarea>
            </div>

            <button
              type="submit"
              class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
            >
              Submit
            </button>
          </form>
        </section>
        <section id="linkedin-input" class="section" style="display: none">
          <form id="linkedin-input-form">
            <div class="form-group">
              <label for="linkedin">LinkedIn Profile URL</label>
              <input type="url" id="linkedin" name="linkedin" required />
            </div>
            <button type="submit">Fetch LinkedIn Data</button>
          </form>
        </section>

        <section id="resume-upload" class="section" style="display: none">
           
            <div class="max-w-md mx-auto p-3 md:max-w-3xl">
    <label for="dropzone-file" class="flex flex-col items-center justify-center w-full h-52 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50  hover:bg-gray-100  ">
        <div class="flex flex-col items-center justify-center pt-5 pb-6">
            <svg class="w-8 h-8 mb-4 text-gray-500 " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
            </svg>
            <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p>
            <p class="text-xs text-gray-500">PDF Only</p>
        </div>
        <input id="dropzone-file" type="file" class="hidden" />
    </label>
            </div>
      
        </section>
      </main>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("manual-input-tab").click();
      });
      function showSection(sectionId) {
        const sections = document.querySelectorAll(".section");
        const tabs = document.querySelectorAll("nav ul li a");

        sections.forEach((section) => {
          section.style.display = "none";
          section.classList.remove("active");
        });

        tabs.forEach((tab) => {
          tab.classList.remove("active");
        });

        document.getElementById(sectionId).style.display = "block";
        document.getElementById(sectionId).classList.add("active");
        document.getElementById(sectionId + "-tab").classList.add("active");
      }

    //   Send Resume Form 
    document.getElementById("resumeForm").addEventListener("submit", async function (event) {
          event.preventDefault();

          const formData = new FormData(event.target);

          const data = {
            name: formData.get("name"),
            title: formData.get("title"),
            phone: formData.get("phone"),
            email: formData.get("email"),
            github: formData.get("github"),
            location: formData.get("location"),
            linkedin: formData.get("linkedin"),
            leetcode: formData.get("leetcode"),
            summary: formData.get("summary"),
            skills: {
              soft: formData.get("softSkills").split(","),
              hard: formData.get("hardSkills").split(","),
              technology: formData.get("technologySkills").split(","),
            },
            internships: [
              {
                name: formData.get("internshipName"),
                position: formData.get("internshipPosition"),
                duration: formData.get("internshipDuration"),
                description: formData.get("internshipDescription"),
              },
            ],
            experience: [
              {
                position: formData.get("experiencePosition"),
                company: formData.get("experienceCompany"),
                duration: formData.get("experienceDuration"),
                badgeLink: formData.get("experienceBadgeLink"),
                description: formData.get("experienceDescription"),
              },
            ],
            projects: [
              {
                name: formData.get("projectName"),
                technology: formData.get("projectTechnology"),
                description: formData.get("projectDescription"),
              },
            ],
            education: {
              degree: formData.get("educationDegree"),
              institution: formData.get("educationInstitution"),
              duration: formData.get("educationDuration"),
            },
          };

          const response = await fetch("/formdata", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          });

          alert("form sent successfully")
          if (response.ok) {
            console.log("PDF generated successfully");
            console.log(response);
            const blob = await response.blob();
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = data.name + ".pdf"; // You can use dynamic naming if needed
            link.click();
            URL.revokeObjectURL(link.href);
          } else {
            console.error("Failed to download PDF:", response.statusText);
          }
    });
    
    // Send Pdf to get Data 
    document.getElementById('dropzone-file').addEventListener('change', async (event) => {
            const fileInput = event.target;
            const file = fileInput.files[0];

            if (file.type !== 'application/pdf') {
                alert('Please select a PDF file.');
                return;
            }

            const formData = new FormData();
            formData.append('pdfFile', file);

            try {
                const response = await fetch('/getpdftoserver', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    alert('PDF uploaded successfully!');
                } else {
                    alert('Failed to upload PDF.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error uploading PDF.');
            }
        });
    
    </script>
  </body>
</html>
